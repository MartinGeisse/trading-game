

IModel<Integer> currentActionProgressModel = new PropertyModel<>(this, "player.actionExecution.progress.currentProgressPoints");
InlineProgressBar currentActionProgressBar = new InlineProgressBar("currentActionProgressBar", currentActionProgressModel) {
	@Override
	protected void onConfigure() {
		super.onConfigure();
		// TODO setVisible(getPlayer().getActionExecution().getProgress() != null);
	}
};
currentActionProgressBar.setTotalAmountModel(new PropertyModel<>(this, "player.actionExecution.progress.requiredProgressPoints"));
currentActionProgressBar.add(new ProgressBarClientProgressBehavior() {
	@Override
	protected int getRemainingSeconds() {
		// TODO Integer remainingTime = getPlayer().getActionExecution().getRemainingTime();
		// TODO return (remainingTime == null ? 0 : remainingTime);
		return 0;
	}
});














currentActionContainer.add(new Label("remainingTime", new AbstractReadOnlyModel<String>() {
	@Override
	public String getObject() {
		// TODO Integer remainingTime = getPlayer().getActionExecution().getRemainingTime();
		Integer remainingTime = 0;
		if (remainingTime == null) {
			return "N/A";
		} else if (remainingTime < 60) {
			return remainingTime + "s";
		} else if (remainingTime < 3600) {
			return String.format("%dm %02ds", remainingTime / 60, remainingTime % 60);
		} else {
			return String.format("%dh %02dm %02ds", remainingTime / 3600, remainingTime / 60 % 60, remainingTime % 60);
		}
	}
}));










<!-- for asteroids etc., not for remote player-owned items -->

            <div wicket:id="remoteItemsContainer">
                <h2>Remote Items</h2>
                <li wicket:id="itemStacks">
                    <span wicket:id="size"></span> <span wicket:id="itemType"></span> <img wicket:id="icon"> <a wicket:id="loadLink">load</a>
                </li>
            </div>
















		WebMarkupContainer remoteItemsContainer = new WebMarkupContainer("remoteItemsContainer") {
			@Override
			protected void onConfigure() {
				super.onConfigure();
				setVisible(getRemoteItems() != null);
			}
		};
		propertiesBox.add(remoteItemsContainer);
		remoteItemsContainer.add(new ListView<ImmutableItemStack>("itemStacks", new PropertyModel<>(this, "remoteItems")) {
			@Override
			protected void populateItem(ListItem<ImmutableItemStack> item) {
				item.add(new Label("size", "" + item.getModelObject().getSize()));
				item.add(new Label("itemType", "" + item.getModelObject().getItemType()));
				item.add(new Image("icon", ItemIcons.get(item.getModelObject().getItemType())));
				item.add(new AjaxLink<Void>("loadLink") {
					@Override
					public void onClick(AjaxRequestTarget target) {
						Player player = getPlayer();
						SpaceStation spaceStation = (SpaceStation) getSelectedSpaceObject();
						ImmutableItemStack itemsToLoad = new ImmutableItemStack(item.getModelObject().getItemType(), item.getModelObject().getSize());
						ActionQueue actionQueue = player.getActionQueue();
						actionQueue.cancelCurrentAction();
						actionQueue.cancelAllPendingActions();
						actionQueue.scheduleAction(new LoadUnloadAction(player, spaceStation, LoadUnloadAction.Type.LOAD, itemsToLoad, item.getIndex()));
					}
				});
			}
		});


		WebMarkupContainer equipmentContainer = new WebMarkupContainer("equipmentContainer") {
			@Override
			protected void onConfigure() {
				super.onConfigure();
				setVisible(getLocalItems() != null);
			}
		};
		propertiesBox.add(equipmentContainer);
		equipmentContainer.add(new ListView<SlotInfo>("slots", new PropertyModel<>(this, "equipmentSlots")) {
			@Override
			protected void populateItem(ListItem<SlotInfo> item) {
				item.add(new Label("slotType", item.getModelObject().getPlayerShipEquipmentSlotType().name().toLowerCase()));
				item.add(new Label("itemType", "" + item.getModelObject().getItemType()));
				item.add(new Image("icon", ItemIcons.get(item.getModelObject().getItemType())));
				item.add(new AjaxLink<Void>("unequipLink") {

					@Override
					public void onClick(AjaxRequestTarget target) {
						Player player = getPlayer();
						ActionQueue actionQueue = player.getActionQueue();
						// TODO should add this action as the next one but keep other actions
						actionQueue.cancelCurrentAction();
						actionQueue.cancelAllPendingActions();
						actionQueue.scheduleAction(new UnequipAction(player, item.getModelObject().getPlayerShipEquipmentSlotType()));
					}

				});
			}
		});
